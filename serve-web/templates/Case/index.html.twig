{% extends 'base.html.twig' %}

{% block htmlTitle %}Orders{% endblock %}
{% block pageTitle %}
    <h1 class="govuk-heading-xl">Orders</h1>
{% endblock %}

{% block content %}

    <div class="govuk-form-group">
        <form method="GET" action="{{ path(app.request.attributes.get('_route')) }}">
            <fieldset class="govuk-fieldset">
                <legend class="govuk-visually-hidden">Search</legend>
                <label for="search" class="govuk-label">Search by case number</label>
                <input type="text" id="search" name="q" value="{{  filters.q }}" class="govuk-input govuk-!-width-one-half" />
                <input type="hidden" name="type" value="{{  filters.type }}" />
                <input class="govuk-button" type="submit" value="Search" id="search_submit" />
            </fieldset>
        </form>
    </div>

    <div class="govuk-tabs" data-module="govuk-tabs">
        <h2 class="govuk-tabs__title">
            Contents
        </h2>

        <ul class="govuk-tabs__list">
            <li class="govuk-tabs__list-item govuk-tabs__list-item--selected">
                <a class="govuk-tabs__tab" href="#to-do">
                    To do
                </a>
            </li>
            <li class="govuk-tabs__list-item">
                <a class="govuk-tabs__tab" href="#served">
                    Served
                </a>
            </li>
        </ul>

        <div class="govuk-tabs__panel" id="to-do">
            {{ include('Case/_stats_panel.html.twig') }}
        </div>

        <div class="govuk-tabs__panel" id="served">
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-full text--center">
                    <div class="govuk-grid-row">
                        <div class="govuk-grid-column-one-half">
                            <div class="app-title app-title--subtitle-right">
                                <h2 class="govuk-heading-l app-main-title">27568</h2>
                                <h2 class="govuk-heading-m app-subtitle">Total orders served</h2>
                            </div>
                        </div>

                        <div class="govuk-grid-column-one-half">
                            <div class="govuk-form-group push--right">
                                <label class="govuk-label" for="sort">
                                    Show served Court Orders by
                                </label>
                                <select class="govuk-select push--right" id="sort" name="sort">
                                    <option value="published">Year breakdown</option>
                                    <option value="updated" selected>Order type</option>
                                    <option value="views">Order status</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="govuk-grid-column-full text--center">
                    <div class="app-stat-items">
                        <div class="app-stat-item">
                            <div class="govuk-caption-xl govuk-!-margin-bottom-2">
                                <a href="#" class="govuk-link">6789</a>
                            </div>
                            <p class="govuk-body-s govuk-!-margin-bottom-0 govuk-!-font-weight-bold">1 Jan 2018 <span class="govuk-!-font-weight-regular">to</span></p>
                            <p class="govuk-body-s govuk-!-font-weight-bold">
                                31 Dec 2018
                            </p>
                        </div>

                        <div class="app-stat-item">
                            <div class="govuk-caption-xl govuk-!-margin-bottom-2">
                                <a href="#" class="govuk-link">9221</a>
                            </div>
                            <p class="govuk-body-s govuk-!-margin-bottom-0 govuk-!-font-weight-bold">1 Jan 2019 <span class="govuk-!-font-weight-regular">to</span></p>
                            <p class="govuk-body-s govuk-!-font-weight-bold">
                                31 Dec 2019
                            </p>
                        </div>

                        <div class="app-stat-item">
                            <div class="govuk-caption-xl govuk-!-margin-bottom-2">
                                <a href="#" class="govuk-link">8132</a>
                            </div>
                            <p class="govuk-body-s govuk-!-margin-bottom-0 govuk-!-font-weight-bold">1 Jan 2020 <span class="govuk-!-font-weight-regular">to</span></p>
                            <p class="govuk-body-s govuk-!-font-weight-bold">
                                31 Dec 2020
                            </p>
                        </div>

                        <div class="app-stat-item">
                            <div class="govuk-caption-xl govuk-!-margin-bottom-2">
                                <a href="#" class="govuk-link">4222</a>
                            </div>
                            <p class="govuk-body-s govuk-!-margin-bottom-0 govuk-!-font-weight-bold">1 Jan 2021 <span class="govuk-!-font-weight-regular">to</span></p>
                            <p class="govuk-body-s">
                                present
                            </p>
                        </div>

                        <div class="app-stat-item">
                            <div class="govuk-caption-xl govuk-!-margin-bottom-2">
                                <a href="#" class="govuk-link">36</a>
                            </div>
                            <p class="govuk-body-s govuk-!-margin-bottom-0 govuk-!-font-weight-bold">Served <span class="govuk-!-font-weight-regular">to</span></p>
                            <p class="govuk-body-s govuk-!-font-weight-bold">
                                today
                            </p>
                        </div>
                    </div>
                </div>
            </div>
    </div>





{#    <div class="govuk-tabs">#}
{#        <h2 class="govuk-tabs__title">#}
{#            Contents#}
{#        </h2>#}
{#        <ul class="govuk-tabs__list">#}
{#            <li class="govuk-tabs__list-item {{ filters.type == 'pending' ? 'govuk-tabs__list-item--selected' }}" role="presentation">#}
{#                <a class="govuk-tabs__tab behat-link-pending-tab" href="{{ path('case-list', {'type': 'pending', 'q': filters.q}) }}" {% if filters.type == 'pending' %}aria-selected="true"{% endif %}>#}
{#                    To do ({{ counts.pending }})#}
{#                </a>#}
{#            </li>#}
{#            <li class="govuk-tabs__list-item {{ filters.type == 'served' ? 'govuk-tabs__list-item--selected' }}" role="presentation">#}
{#                <a class="govuk-tabs__tab behat-link- behat-link-served-tab" href="{{ path('case-list', {'type': 'served', 'q': filters.q}) }}" {% if filters.type == 'served' %}aria-selected="true"{% endif %}>#}
{#                    Served ({{ counts.served }})#}
{#                </a>#}
{#            </li>#}
{#        </ul>#}

{#        <section class="govuk-tabs__panel">#}

{#            {% if orders | length > 0 %}#}

{#                <table class="govuk-table">#}
{#                    <thead class="govuk-table__head">#}
{#                        <tr class="govuk-table__row">#}
{#                            <th class="govuk-table__header" scope="col">Case number</th>#}
{#                            <th class="govuk-table__header" scope="col">Order type</th>#}
{#                            <th class="govuk-table__header" scope="col">Order number</th>#}
{#                            <th class="govuk-table__header" scope="col">Client name</th>#}
{#                            {% if filters.type == 'pending' %}#}
{#                                <th class="govuk-table__header" scope="col">Order made</th>#}
{#                                <th class="govuk-table__header" scope="col">Order issued</th>#}
{#                                <th class="govuk-table__header" scope="col">Status</th>#}
{#                            {% else %}#}
{#                                <th class="govuk-table__header" scope="col">Date served</th>#}
{#                                <th class="govuk-table__header" scope="col">Documents</th>#}
{#                            {% endif %}#}
{#                        </tr>#}
{#                    </thead>#}
{#                    <tbody class="govuk-table__body">#}
{#                        {% for order in orders %}#}
{#                            {% set client = order.client %}#}
{#                            <tr class="govuk-table__row behat-region-order-{{ client.caseNumber }}-{{ order.type }}" >#}
{#                                <td class="govuk-table__cell">#}
{#                                    {% if order.servedAt %}#}
{#                                         {{ client.caseNumber }}#}
{#                                    {% else %}#}
{#                                        <a href="{{ path('order-summary', {'orderId': order.id}) }}" id="order-{{ client.caseNumber }}-{{ order.type }}">#}
{#                                            {{ client.caseNumber }}#}
{#                                        </a>#}
{#                                    {% endif %}#}
{#                                </td>#}
{#                                <td class="govuk-table__cell">{{ ('order.' ~ order.type) | trans }}</td>#}
{#                                <td class="govuk-table__cell">{{ order.orderNumber }}</td>#}
{#                                <td class="govuk-table__cell">{{ client.clientName }}</td>#}
{#                                {% if filters.type == 'pending' %}#}
{#                                    <td class="govuk-table__cell">#}
{#                                        {{ order.madeAt | date('j M Y') }}#}
{#                                    </td>#}
{#                                    <td class="govuk-table__cell">#}
{#                                        {{ order.issuedAt | date('j M Y') }}#}
{#                                    </td>#}
{#                                    <td class="govuk-table__cell">#}
{#                                        {% if order.readyToServe %}#}
{#                                            <strong class="govuk-tag">#}
{#                                                READY TO SERVE#}
{#                                            </strong>#}
{#                                        {% else %}#}
{#                                            <strong class="govuk-tag govuk-tag--yellow">#}
{#                                                TO DO#}
{#                                            </strong>#}
{#                                        {% endif %}#}
{#                                    </td>#}
{#                                {% else %}#}

{#                                    <td class="govuk-table__cell">#}
{#                                        {{ order.servedAt | date('d/m/Y') }}#}
{#                                    </td>#}

{#                                    <td class="govuk-table__cell">#}
{#                                        <details class="govuk-details govuk-!-margin-bottom-0" data-module="govuk-details">#}
{#                                            <summary class="govuk-details__summary">#}
{#                                                <span class="govuk-details__summary-text">{{ order.documents | length }} documents</span>#}
{#                                            </summary>#}
{#                                            <div class="govuk-details__text">#}
{#                                                {% for d in order.documents %}#}
{#                                                    {{ d.fileName }}{% if not loop.last %}<br>{% endif %}#}
{#                                                {% endfor %}#}
{#                                            </div>#}
{#                                        </details>#}
{#                                    </td>#}
{#                                {% endif %}#}
{#                            </tr>#}
{#                        {% endfor %}#}
{#                    </tbody>#}
{#                </table>#}

{#                <div class="govuk-pagination">#}
{#                    <div class="govuk-pagination__summary">Showing 1 â€“ {{ orders | length }} of {{ counts[filters['type']] }} orders</div>#}
{#                </div>#}
{#            {% else %}#}
{#                <p class="govuk-!-font-weight-bold">No orders found</p>#}
{#            {% endif %}#}

{#        </section>#}
{#    </div>#}

{% endblock %}
