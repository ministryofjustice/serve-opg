version: '3'
services:
  app:
    build:
      args:
        WITH_XDEBUG: 0
    environment:
      APP_ENV: 'test'
      DC_BEHAT_CONTROLLER_ENABLED: 1
      SYMFONY_DEPRECATIONS_HELPER: 1500
      DC_S3_ENDPOINT: 'http://localstack:4566'
      DYNAMODB_ENDPOINT: 'http://localstack:4566'
      APP_DEBUG: 'false'
      SIRIUS_PUBLIC_API_PASSWORD: 'FAKE_API_PASSWORD'
      AWS_ACCESS_KEY_ID: 'foo'
      AWS_SECRET_ACCESS_KEY: 'bar'
      APP_SECRET: 'aFakeSecret'
      BEHAT_PASSWORD: 'Abcd1234'
    env_file:
      - .env
    volumes:
      - ./serve-web/features:/var/www/features
      - ./serve-web/src/Behat:/var/www/src/Behat
